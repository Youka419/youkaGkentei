<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•é¡Œä¸€è¦§ - Gæ¤œå®š å­¦ç¿’ã‚¢ãƒ—ãƒª</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .question-list-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }
        
        .question-list-item {
            background: #f9f9f9;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .question-list-item.wrong {
            border-left-color: #f44336;
            background: #ffebee;
        }
        
        .question-list-item.correct {
            border-left-color: #4caf50;
            background: #e8f5e9;
        }
        
        .question-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .question-text-list {
            font-size: 1.1em;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .answer-section {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .correct-answer {
            color: #4caf50;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .explanation {
            color: #666;
            line-height: 1.6;
            margin-top: 10px;
        }
        
        .category-selector {
            margin-bottom: 30px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
        }
        
        .category-selector select {
            width: 100%;
            padding: 12px;
            font-size: 1em;
            border-radius: 5px;
            border: 2px solid #667eea;
        }
    </style>
</head>
<body>
    <div class="question-list-container">
        <a href="index.html" class="back-link">â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
        
        <h1>ğŸ“‹ å•é¡Œä¸€è¦§</h1>
        
        <div class="category-selector">
            <label for="categorySelect" style="display: block; margin-bottom: 10px; font-weight: bold;">åˆ†é‡ã‚’é¸æŠï¼š</label>
            <select id="categorySelect" onchange="loadQuestionList()">
                <option value="category1">â‘  äººå·¥çŸ¥èƒ½ã¨ã¯</option>
                <option value="category2">â‘¡ äººå·¥çŸ¥èƒ½ã‚’ã‚ãã‚‹å‹•å‘</option>
                <option value="category3">â‘¢ æ©Ÿæ¢°å­¦ç¿’ã®æ¦‚è¦</option>
                <option value="category4">â‘£ ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ¦‚è¦</option>
                <option value="category5">â‘¤ ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®è¦ç´ æŠ€è¡“</option>
                <option value="category6">â‘¥ ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®å¿œç”¨ä¾‹</option>
                <option value="category7">â‘¦ AIã®ç¤¾ä¼šå®Ÿè£…ã«å‘ã‘ã¦</option>
                <option value="category8">â‘§ AIã«å¿…è¦ãªæ•°ç†ãƒ»çµ±è¨ˆçŸ¥è­˜</option>
                <option value="category9">â‘¨ AIã«é–¢ã™ã‚‹æ³•å¾‹ã¨å¥‘ç´„</option>
                <option value="category10">â‘© AIå€«ç†ãƒ»AIã‚¬ãƒãƒŠãƒ³ã‚¹</option>
            </select>
        </div>
        
        <div id="questionList">
            <!-- å•é¡Œä¸€è¦§ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
        </div>
    </div>
    
    <script src="script.js"></script>
    <script>
        const categoryNames = {
            'category1': 'â‘  äººå·¥çŸ¥èƒ½ã¨ã¯',
            'category2': 'â‘¡ äººå·¥çŸ¥èƒ½ã‚’ã‚ãã‚‹å‹•å‘',
            'category3': 'â‘¢ æ©Ÿæ¢°å­¦ç¿’ã®æ¦‚è¦',
            'category4': 'â‘£ ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ¦‚è¦',
            'category5': 'â‘¤ ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®è¦ç´ æŠ€è¡“',
            'category6': 'â‘¥ ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®å¿œç”¨ä¾‹',
            'category7': 'â‘¦ AIã®ç¤¾ä¼šå®Ÿè£…ã«å‘ã‘ã¦',
            'category8': 'â‘§ AIã«å¿…è¦ãªæ•°ç†ãƒ»çµ±è¨ˆçŸ¥è­˜',
            'category9': 'â‘¨ AIã«é–¢ã™ã‚‹æ³•å¾‹ã¨å¥‘ç´„',
            'category10': 'â‘© AIå€«ç†ãƒ»AIã‚¬ãƒãƒŠãƒ³ã‚¹'
        };
        
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’å–å¾—
        function getCategoryFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('category') || 'category1';
        }
        
        // å•é¡Œä¸€è¦§ã‚’èª­ã¿è¾¼ã‚€
        function loadQuestionList() {
            const category = document.getElementById('categorySelect').value;
            const questionListDiv = document.getElementById('questionList');
            
            // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒšãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚“ã§å•é¡Œã‚’æŠ½å‡º
            fetch(`${category}.html`)
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const questions = doc.querySelectorAll('.question');
                    
                    let htmlContent = `<h2 style="color: #667eea; margin-bottom: 20px;">${categoryNames[category]} - å•é¡Œä¸€è¦§ï¼ˆå…¨${questions.length}å•ï¼‰</h2>`;
                    htmlContent += '<p style="margin-bottom: 20px; color: #666;">å„å•é¡Œã®æ­£è§£ã¨èª¬æ˜ã‚’ç¢ºèªã§ãã¾ã™ã€‚é–“é•ãˆã‚„ã™ã„å•é¡Œã‚’é‡ç‚¹çš„ã«å¾©ç¿’ã—ã¾ã—ã‚‡ã†ã€‚</p>';
                    
                    if (questions.length === 0) {
                        htmlContent += '<div class="no-data">å•é¡ŒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</div>';
                    } else {
                        questions.forEach((question, index) => {
                            const questionText = question.querySelector('.question-text')?.textContent || question.querySelector('.question-text')?.innerHTML || '';
                            const result = question.querySelector('.result');
                            const correctAnswer = result?.querySelector('strong')?.textContent || '';
                            const explanation = result?.textContent?.replace(correctAnswer, '').trim() || '';
                            
                            // å­¦ç¿’å±¥æ­´ã‹ã‚‰å›ç­”çŠ¶æ³ã‚’å–å¾—
                            const history = StudyHistory.getHistory();
                            const categoryHistory = history[category] || { questions: [] };
                            const questionHistory = categoryHistory.questions?.[index];
                            const isWrong = questionHistory && !questionHistory.isCorrect;
                            const itemClass = isWrong ? 'wrong' : (questionHistory?.isCorrect ? 'correct' : '');
                            
                            htmlContent += `
                                <div class="question-list-item ${itemClass}">
                                    <div class="question-number">å•é¡Œ ${index + 1}${isWrong ? ' âŒ' : questionHistory?.isCorrect ? ' âœ“' : ''}</div>
                                    <div class="question-text-list">${questionText}</div>
                                    <div class="answer-section">
                                        <div class="correct-answer">${correctAnswer || 'æ­£è§£æƒ…å ±ãªã—'}</div>
                                        <div class="explanation">${explanation || 'èª¬æ˜æƒ…å ±ãªã—'}</div>
                                    </div>
                                </div>
                            `;
                        });
                    }
                    
                    questionListDiv.innerHTML = htmlContent;
                })
                .catch(error => {
                    questionListDiv.innerHTML = '<div class="no-data">å•é¡Œãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</div>';
                    console.error('Error loading questions:', error);
                });
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚
        document.addEventListener('DOMContentLoaded', function() {
            const category = getCategoryFromURL();
            document.getElementById('categorySelect').value = category;
            loadQuestionList();
        });
    </script>
</body>
</html>

